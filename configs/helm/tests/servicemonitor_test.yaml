# yaml-language-server: $schema=https://raw.githubusercontent.com/helm-unittest/helm-unittest/main/schema/helm-testsuite.json
suite: service monitor tests
templates:
  - servicemonitor.yaml
tests:
  - it: render defaul service monitor
    asserts:
      - isKind:
          of: ServiceMonitor
      - equal:
          path: metadata.name
          value: RELEASE-NAME-prometheus-rds-exporter-chart
      - equal:
          path: spec.endpoints[0].interval
          value: 60s
  - it: render custom service monitor
    values:
      - ./values/with_servicemonitor.yaml
    asserts:
      - equal:
          path: spec.endpoints[0].interval
          value: 120s
      - equal:
          path: metadata.labels.additionalLabel1
          value: value1
